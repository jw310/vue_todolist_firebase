(function(t){function e(e){for(var o,i,r=e[0],s=e[1],l=e[2],u=0,p=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);d&&d(e);while(p.length)p.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(c.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},c=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue_todolist_firebase/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=s;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"29d9":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[n("template",{slot:"before"},[t._v("Please wait")]),n("template",{slot:"after"},[t._v("loading")])],2),n("Navbar"),n("div",{staticClass:"wrap"},[n("div",{staticClass:"input-group mb-3"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newtodo,expression:"newtodo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"輸入後，enter 即可新增"},domProps:{value:t.newtodo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTodo(e)},input:function(e){e.target.composing||(t.newtodo=e.target.value)}}}),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addTodo}},[t._v("新增")])])]),n("div",{staticClass:"card text-center"},[n("div",{staticClass:"card-header"},[n("ul",{staticClass:"nav nav-tabs card-header-tabs"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"all"==t.visibility},attrs:{href:"#"},on:{click:function(e){t.visibility="all"}}},[t._v("全部")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"active"==t.visibility},attrs:{href:"#"},on:{click:function(e){t.visibility="active"}}},[t._v("進行中")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",class:{active:"completed"==t.visibility},attrs:{href:"#"},on:{click:function(e){t.visibility="completed"}}},[t._v("已完成")])])])]),n("ul",{staticClass:"list-group list-group-flush text-left"},t._l(t.filterTodos,(function(e,o){return n("li",{key:o,staticClass:"list-group-item",on:{dblclick:function(n){return t.editTodo(e)}}},[e.id!==t.cacheTodo.id?n("div",{staticClass:"d-flex"},[n("div",{staticClass:"form-check"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.completed,expression:"item.completed"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:e.id},domProps:{checked:Array.isArray(e.completed)?t._i(e.completed,null)>-1:e.completed},on:{change:[function(n){var o=e.completed,a=n.target,c=!!a.checked;if(Array.isArray(o)){var i=null,r=t._i(o,i);a.checked?r<0&&t.$set(e,"completed",o.concat([i])):r>-1&&t.$set(e,"completed",o.slice(0,r).concat(o.slice(r+1)))}else t.$set(e,"completed",c)},function(n){return t.mark(e)}]}}),n("label",{staticClass:"form-check-label",class:{completed:e.completed},attrs:{for:e.id}},[t._v(t._s(e.content))])]),n("span",{staticClass:"ml-1"},[t._v("建立時間："+t._s(t._f("timestamp")(e.time)))]),n("button",{staticClass:"close ml-auto",attrs:{type:"button","aria-label":"Close"},on:{click:function(n){return t.removeTodo(e)}}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]):t._e(),e.id===t.cacheTodo.id?n("input",{directives:[{name:"model",rawName:"v-model",value:t.cacheContent,expression:"cacheContent"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.cacheContent},on:{keyup:[function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:t.cancelEdit(e)},function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.doneEdit(e)}],input:function(e){e.target.composing||(t.cacheContent=e.target.value)}}}):t._e()])})),0),n("div",{staticClass:"card-footer d-flex justify-content-between"},[n("span",[t._v("還有 "+t._s(this.todos.filter((function(t){return!t.completed})).length)+" 筆任務未完成")])])]),t._m(1)])],1)},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-prepend"},[n("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[t._v("待辦事項")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-2 text-left"},[n("p",[t._v(" 小提醒：點擊待辦事項兩次後，點選內容後即可進行修改。 "),n("br"),t._v("小提醒：若要取消內容修改，請使用 esc 退出。 ")])])}],i=(n("c740"),n("4160"),n("a434"),n("498a"),n("159b"),n("5530")),r=(n("96cf"),n("1da1")),s=n("59ca"),l=n.n(s),d=(n("e71f"),{apiKey:Object({NODE_ENV:"production",BASE_URL:"/vue_todolist_firebase/"}).FIREBASE_APIKEY,authDomain:"todo-ccc5f.firebaseapp.com",databaseURL:"https://todo-ccc5f.firebaseio.com",projectId:"todo-ccc5f",storageBucket:"todo-ccc5f.appspot.com",messagingSenderId:"165986659946",appId:Object({NODE_ENV:"production",BASE_URL:"/vue_todolist_firebase/"}).FIREBASE_APPID,measurementId:"G-LQQ5PNH9XL"});l.a.initializeApp(d);var u=l.a.firestore(),p=u,f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("h1",[t._v("個人待辦事項管理小幫手")])])}],m={name:"Navbar"},h=m,b=(n("fb5c"),n("2877")),g=Object(b["a"])(h,f,v,!1,null,"4b670754",null),_=g.exports,y={name:"App",components:{Navbar:_},data:function(){return{newtodo:"",todos:[],cacheTodo:{},cacheContent:"",visibility:"all",completed:!1,isLoading:!1}},methods:{addTodo:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!0,n=t.newtodo.trim(),o=Math.floor(Date.now()),n){e.next=5;break}return e.abrupt("return");case 5:return a={time:o,content:n,completed:!1},e.prev=6,e.next=9,p.collection("todos").add(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](6),console.log(e.t0);case 14:t.newtodo="",t.isLoading=!1;case 16:case"end":return e.stop()}}),e,null,[[6,11]])})))()},editTodo:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=Math.floor(Date.now()),e.cacheTodo=t,e.cacheContent=t.content,a={time:o,content:e.cacheContent,completed:!1},n.prev=4,n.next=7,p.collection("todos").doc(t.id).update(a);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](4),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[4,9]])})))()},mark:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=Math.floor(Date.now()),e.completed=t.completed,a={time:o,content:e.cacheContent,completed:e.completed},n.prev=3,n.next=6,p.collection("todos").doc(t.id).update(a);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](3),console.log(n.t0);case 11:e.cacheTodo={};case 12:case"end":return n.stop()}}),n,null,[[3,8]])})))()},removeTodo:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.isLoading=!0,n.prev=1,n.next=4,p.collection("todos").doc(t.id).delete();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),console.log(n.t0);case 9:o=e.todos.findIndex((function(e){return t.id===e.id})),e.todos.splice(o,1),e.isLoading=!1;case 12:case"end":return n.stop()}}),n,null,[[1,6]])})))()},cancelEdit:function(){this.cacheTodo={}},doneEdit:function(t){t.content=this.cacheContent,this.cacheContent="",this.editTodo(t),this.cacheTodo={}},fetchTodos:function(){var t=this;this.todos=[],p.collection("todos").onSnapshot((function(e){var n=e.docChanges();n.forEach((function(e){"added"===e.type&&t.todos.push(Object(i["a"])(Object(i["a"])({},e.doc.data()),{},{id:e.doc.id}))}))}))}},computed:{filterTodos:function(){return"active"==this.visibility?this.todos.filter((function(t){return!t.completed})):"completed"==this.visibility?this.todos.filter((function(t){return t.completed})):this.todos}},mounted:function(){this.fetchTodos()}},k=y,C=(n("5c0b"),Object(b["a"])(k,a,c,!1,null,null,null)),w=C.exports,x=n("5f5b"),O=(n("f9e3"),n("2dd8"),n("99af"),function(t){var e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1;o=o<10?"0"+o:o;var a=e.getDate();a=a<10?"0"+a:a;var c=e.getHours();c=c<10?"0"+c:c;var i=e.getMinutes();i=i<10?"0"+i:i;var r=e.getSeconds();r=r<10?"0"+r:r;var s="".concat(n,"/").concat(o,"/").concat(a,"/").concat(c,":").concat(i,":").concat(r);return s}),E=n("9062"),T=n.n(E),j=(n("e40d"),n("0ff2"));o["default"].use(x["a"]),o["default"].filter("timestamp",O),o["default"].component("Loading",T.a),o["default"].use(j["a"]),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(w)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),a=n.n(o);a.a},"9c0c":function(t,e,n){},fb5c:function(t,e,n){"use strict";var o=n("29d9"),a=n.n(o);a.a}});
//# sourceMappingURL=app.e54c532f.js.map